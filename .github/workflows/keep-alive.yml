name: Direct Curl Test

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
      - name: Test Various Curl Commands
        run: |
          APP_URL="${{ secrets.STREAMLIT_APP_URL }}"
          
          echo "ðŸ” CURL TESTS"
          echo "============="
          echo ""
          
          # Test 1: Najprostszy curl
          echo "TEST 1: Basic curl (no options)"
          curl "$APP_URL" && echo "OK" || echo "Exit code: $?"
          echo ""
          
          # Test 2: Z -L
          echo "TEST 2: With -L (follow redirects)"
          curl -L "$APP_URL" 2>&1 | head -5 && echo "OK" || echo "Exit code: $?"
          echo ""
          
          # Test 3: Tylko status code
          echo "TEST 3: Status code only"
          curl -s -o /dev/null -w "%{http_code}" "$APP_URL" && echo "" || echo "Exit code: $?"
          echo ""
          
          # Test 4: Verbose
          echo "TEST 4: Verbose (first 20 lines)"
          curl -v "$APP_URL" 2>&1 | head -20
          echo ""
          
          # Test 5: Bez secret - bezpoÅ›redni URL
          echo "TEST 5: Direct URL test"
          curl -sL -o /dev/null -w "HTTP: %{http_code}\n" "https://streamlit.io" || echo "Exit code: $?"
          echo ""
          
          # Test 6: wget zamiast curl
          echo "TEST 6: Using wget instead"
          wget -q -O - "$APP_URL" 2>&1 | head -5 && echo "OK" || echo "Exit code: $?"